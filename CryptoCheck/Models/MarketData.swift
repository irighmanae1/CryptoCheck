//
//  MarketData.swift
//  CryptoCheck
//
//  Created by Liam Mulligan on 6/4/25.
//

import Foundation

// JSON data:
/*
 
 URL: https://api.coingecko.com/api/v3/global?x_cg_api_key=CG-SQRs5HAdEpwFaqW5e52UUEWd
 
 JSON Response:
 {
   "data": {
     "active_cryptocurrencies": 17282,
     "upcoming_icos": 0,
     "ongoing_icos": 49,
     "ended_icos": 3376,
     "markets": 1279,
     "total_market_cap": {
       "btc": 32624148.20664384,
       "eth": 1301659238.224631,
       "ltc": 38440788932.99302,
       "bch": 8407575372.214787,
       "bnb": 5142362082.568029,
       "eos": 5369779191498.117,
       "xrp": 1537976811051.6975,
       "xlm": 12749145659661.195,
       "link": 245069918419.02264,
       "dot": 845917236260.268,
       "yfi": 654565320.8046707,
       "usd": 3432569250791.0283,
       "aed": 12607826858155.447,
       "ars": 4068488403220274,
       "aud": 5279586708672.169,
       "bdt": 419276155228422.1,
       "bhd": 1293948169916.6875,
       "bmd": 3432569250791.0283,
       "brl": 19368961944007.79,
       "cad": 4690193972895.846,
       "chf": 2806132227660.167,
       "clp": 3215939805373606.5,
       "cny": 24663696580783.7,
       "czk": 74532062656275.75,
       "dkk": 22405450461519.293,
       "eur": 3004139984892.048,
       "gbp": 2530713168684.4473,
       "gel": 9405239747167.418,
       "hkd": 26933431509330.5,
       "huf": 1211663326945990.8,
       "idr": 55940004051520040,
       "ils": 11960512948841.275,
       "inr": 294761439103449.4,
       "jpy": 490011898652538.1,
       "krw": 4679041397501838,
       "kwd": 1051327310132.276,
       "lkr": 1026914963434881.4,
       "mmk": 7201530288159576,
       "mxn": 65842125717572.93,
       "myr": 14578121608109.494,
       "ngn": 5422223691319538,
       "nok": 34631651135510.277,
       "nzd": 5686764938339.503,
       "php": 191295337168835.34,
       "pkr": 967988781676371.6,
       "pln": 12857371210118.705,
       "rub": 272029959781920.72,
       "sar": 12873542043859.18,
       "sek": 32841233312005.438,
       "sgd": 4412430469121.835,
       "thb": 111752440813378.11,
       "try": 134350063664402.92,
       "twd": 102808881630442.1,
       "uah": 142228599585896.03,
       "vef": 343703159081.7055,
       "vnd": 89529738780384480,
       "zar": 61124103905760.89,
       "xdr": 2460421015566.7485,
       "xag": 99342158315.60568,
       "xau": 1015594264.2315415,
       "bits": 32624148206643.84,
       "sats": 3262414820664384
     },
     "total_volume": {
       "btc": 887507.225872307,
       "eth": 35410333.84934605,
       "ltc": 1045743102.0165535,
       "bch": 228719654.15443698,
       "bnb": 139892802.0257542,
       "eos": 146079456346.4742,
       "xrp": 41839116362.108025,
       "xlm": 346827718687.9504,
       "link": 6666881294.89694,
       "dot": 23012329851.97232,
       "yfi": 17806792.941838846,
       "usd": 93379603172.71149,
       "aed": 342983282453.3693,
       "ars": 110679145808329.27,
       "aud": 143625860325.50308,
       "bdt": 11405987216714.646,
       "bhd": 35200561971.191666,
       "bmd": 93379603172.71149,
       "brl": 526913180202.2623,
       "cad": 127592022183.12952,
       "chf": 76338012352.89798,
       "clp": 87486416416481.67,
       "cny": 670951124716.5667,
       "czk": 2027569999609.7188,
       "dkk": 609517804344.4778,
       "eur": 81724614761.91585,
       "gbp": 68845513133.12914,
       "gel": 255860112693.2295,
       "hkd": 732696986620.4744,
       "huf": 32962085360133.684,
       "idr": 1521791695420867,
       "ils": 325373756887.0594,
       "inr": 8018689268324.144,
       "jpy": 13330282159795.115,
       "krw": 127288627556959.6,
       "kwd": 28600304859.738068,
       "lkr": 27936191456463.82,
       "mmk": 195910407456348.66,
       "mxn": 1791168982282.8413,
       "myr": 396583174674.5056,
       "ngn": 147506156355741.9,
       "nok": 942119329276.3109,
       "nzd": 154702735613.0565,
       "php": 5203997754597.196,
       "pkr": 26333163792032.965,
       "pln": 349771886224.42224,
       "rub": 7400302175890.719,
       "sar": 350211797534.9689,
       "sek": 893412808400.2344,
       "sgd": 120035744694.3937,
       "thb": 3040113050692.3813,
       "try": 3654858712120.483,
       "twd": 2796812494625.882,
       "uah": 3869186378710.586,
       "vef": 9350099665.683596,
       "vnd": 2435566734026478.5,
       "zar": 1662819931656.79,
       "xdr": 66933285619.358345,
       "xag": 2702503764.4016013,
       "xau": 27628223.190710146,
       "bits": 887507225872.307,
       "sats": 88750722587230.7
     },
     "market_cap_percentage": {
       "btc": 60.919080167593876,
       "eth": 9.274363952421856,
       "usdt": 4.478374677290786,
       "xrp": 3.820571999024841,
       "bnb": 2.8365071478422403,
       "sol": 2.3780233830425597,
       "usdc": 1.790721879804169,
       "doge": 0.8322910814762938,
       "trx": 0.7565017035143489,
       "ada": 0.7145592412235829
     },
     "market_cap_change_percentage_24h_usd": -2.62845681618129,
     "updated_at": 1749061616
   }
 }

 
 */


struct GlobalData: Codable {
    let data: MarketData?
}


struct MarketData: Codable {
    let totalMarketCap, totalVolume, marketCapPercentage: [String: Double]
    let marketCapChangePercentage24HUsd: Double
    
    enum CodingKeys: String, CodingKey {
        case totalMarketCap = "total_market_cap"
        case totalVolume = "total_volume"
        case marketCapPercentage = "market_cap_percentage"
        case marketCapChangePercentage24HUsd = "market_cap_change_percentage_24h_usd"
    }
}
